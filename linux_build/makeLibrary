#!/bin/bash
make clean
rm ../test_build/resource/libBP.so -f
rm ../test_build/src/libBP.so -f 

javac -d . ../test_build/src/beliefPropagation.java 
javah -jni -d ../include -jni bp_interface

# Compile .o files
#g++ -c -I../include -I/usr/local/share/jdk1.8.0_25/include/linux  -I/usr/local/share/jdk1.8.0_25/include/ -c ../src/Factor.cpp  ../src/graphmodel.cpp  ../src/BPinterface.cpp  ../src/libBP.cpp
g++  -fPIC -g -I../include -I/usr/local/share/jdk1.8.0_25/include/linux  -I/usr/local/share/jdk1.8.0_25/include/ -c ../src/Factor.cpp  ../src/graphmodel.cpp  ../src/BPinterface.cpp  ../src/libBP.cpp
# Compile Library
#g++ -shared -fPIC -I/usr/local/share/jdk1.8.0_25/include/linux  -I/usr/local/share/jdk1.8.0_25/include/ -I../include -lboost_program_options --static -O3 ../src/libBP.cpp Factor.o graphmodel.o BPinterface.o  -o ../test_build/src/libBP.so 
g++ -shared -g -Wl,-soname,libBP.so  *.o   -O3 -o ../test_build/src/libBP.so






